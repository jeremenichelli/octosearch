function createPie(t,e,i,n,s,r){var o=parseFloat(e.replace("px","")),a=document.createElement("div");a.id=t;var l=document.createElement("div");l.style.width=e,l.style.height=e,l.style.position="relative",l.style.webkitBorderRadius=e,l.style.mozBorderRadius=e,l.style.borderRadius=e,l.style.backgroundColor=i,a.appendChild(l);for(var u=0,h=0,d=0;n>d;d++){var c=document.createElement("div");c.style.position="absolute",c.style.top="0px",c.style.left="0px",c.style.width=e,c.style.height=e,c.style.webkitBorderRadius=e,c.style.mozBorderRadius=e,c.style.borderRadius=e,c.style.clip="rect(0px,"+o+"px,"+o+"px,"+o/2+"px)";var p=document.createElement("div");p.style.backgroundColor=r[d],p.style.position="absolute",p.style.top="0px",p.style.left="0px",p.style.width=e,p.style.height=e,p.style.webkitBorderRadius=e,p.style.mozBorderRadius=e,p.style.borderRadius=e,p.style.clip="rect(0px, "+o/2+"px, "+o+"px, 0px)";var f=s[d];if(50>=f)h=parseFloat(180*f/50),p.style.webkitTransform="rotate("+h+"deg)",p.style.mozTransform="rotate("+h+"deg)",p.style.transform="rotate("+h+"deg)",c.appendChild(p),0!=d&&(c.style.webkitTransform="rotate("+u+"deg)",c.style.mozTransform="rotate("+u+"deg)",c.style.transform="rotate("+u+"deg)"),l.appendChild(c),u+=h;else{c.style.clip="rect(0px,"+o+"px,"+o+"px,"+(o-100)/2+"px)",c.style.webkitTransform="rotate("+u+"deg)",c.style.mozTransform="rotate("+u+"deg)",c.style.transform="rotate("+u+"deg)",p.style.webkitTransform="rotate(180deg)",p.style.mozTransform="rotate(180deg)",p.style.transform="rotate(180deg)",c.appendChild(p),l.appendChild(c);var c=document.createElement("div");c.style.position="absolute",c.style.top="0px",c.style.left="0px",c.style.width=e,c.style.height=e,c.style.webkitBorderRadius=e,c.style.mozBorderRadius=e,c.style.borderRadius=e,c.style.clip="rect(0px,"+o+"px,"+o+"px,"+o/2+"px)",0!=d&&(u-=1),c.style.webkitTransform="rotate("+(180+u)+"deg)",c.style.mozTransform="rotate("+(180+u)+"deg)",c.style.transform="rotate("+(180+u)+"deg)",0!=d&&(u+=1);var p=document.createElement("div");p.style.backgroundColor=r[d],p.style.position="absolute",p.style.top="0px",p.style.left="0px",p.style.width=e,p.style.height=e,p.style.webkitBorderRadius=e,p.style.mozBorderRadius=e,p.style.borderRadius=e,p.style.clip="rect(0px, "+o/2+"px, "+o+"px, 0px)",h=parseFloat(180*(f-50)/50),0!=d&&(h+=1),p.style.webkitTransform="rotate("+h+"deg)",p.style.mozTransform="rotate("+h+"deg)",p.style.transform="rotate("+h+"deg)",0!=d&&(h-=1),c.appendChild(p),l.appendChild(c),u+=180+h}}return a}Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},s=function(){return i.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,s.prototype=new n,s}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var i;if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),s=n.length>>>0;if(0===s)return-1;var r=+e||0;if(1/0===Math.abs(r)&&(r=0),r>=s)return-1;for(i=Math.max(r>=0?r:s-Math.abs(r),0);s>i;){if(i in n&&n[i]===t)return i;i++}return-1}),function(t){"use strict";var e="undefined"!=typeof HTMLElement?HTMLElement:Element,i=function(t){return t.className.split(/\s+/)},n=function(t,e){return-1!==i(t).indexOf(e)},s=function(t,e){n(t,e)||(t.className+=""===t.className?e:" "+e)},r=function(t,e){if(n(t,e)){var s=i(t);s.splice(s.indexOf(e),1),t.className=s.join(" ")}},o=function(t,e){n(t,e)?r(t,e):s(t,e)};t.documentElement.classList?(e.prototype.hasClass=function(t){return this.classList.contains(t)},e.prototype.addClass=function(t){this.classList.add(t)},e.prototype.removeClass=function(t){this.classList.remove(t)},e.prototype.toggleClass=function(t){this.classList.toggle(t)}):(e.prototype.hasClass=function(t){return n(this,t)},e.prototype.addClass=function(t){s(this,t)},e.prototype.removeClass=function(t){r(this,t)},e.prototype.toggleClass=function(t){o(this,t)})}(document),function(t,e){"use strict";"function"==typeof define&&define.amd?define(function(){return e(t)}):"object"==typeof exports?module.exports=e:t.jabiru=e(t)}(this,function(){"use strict";var t="callback",e=0,i=function(i,n){function s(t){window.jabiru[o]=t=null,r.parentNode.removeChild(r)}var r=document.createElement("script"),o=t+e;e++,window.jabiru[o]=function(t){"function"==typeof n?n(t):console.error("You must specify a method as a callback")},r.onload=r.onreadystatechange=function(t){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(r&&(r.onreadystatechange=null),s(t))},r.src=i+"?callback=jabiru."+o,document.head.appendChild(r)};return{get:i}}),function(){function t(t,i,n,s){return new e(t,i,n,s)}function e(t,e,i,n){this.options=n||{},this.options.adapters=this.options.adapters||{},this.obj=t,this.keypath=e,this.callback=i,this.objectPath=[],this.parse(),"undefined"!=typeof(this.target=this.realize())&&this.set(!0,this.key,this.target,this.callback)}function i(t){throw new Error("[sightglass] "+t)}t.adapters={},e.tokenize=function(t,e,i){for(tokens=[],current={"interface":i,path:""},index=0;index<t.length;index++)char=t.charAt(index),~e.indexOf(char)?(tokens.push(current),current={"interface":char,path:""}):current.path+=char;return tokens.push(current),tokens},e.prototype.parse=function(){interfaces=this.interfaces(),interfaces.length||i("Must define at least one adapter interface."),~interfaces.indexOf(this.keypath[0])?(root=this.keypath[0],path=this.keypath.substr(1)):("undefined"==typeof(root=this.options.root||t.root)&&i("Must define a default root adapter."),path=this.keypath),this.tokens=e.tokenize(path,interfaces,root),this.key=this.tokens.pop()},e.prototype.realize=function(){return current=this.obj,unreached=!1,this.tokens.forEach(function(t,e){"undefined"!=typeof current?("undefined"!=typeof this.objectPath[e]?current!==(prev=this.objectPath[e])&&(this.set(!1,t,prev,this.update.bind(this)),this.set(!0,t,current,this.update.bind(this)),this.objectPath[e]=current):(this.set(!0,t,current,this.update.bind(this)),this.objectPath[e]=current),current=this.get(t,current)):(unreached===!1&&(unreached=e),(prev=this.objectPath[e])&&this.set(!1,t,prev,this.update.bind(this)))},this),unreached!==!1&&this.objectPath.splice(unreached),current},e.prototype.update=function(){(next=this.realize())!==this.target&&("undefined"!=typeof this.target&&this.set(!1,this.key,this.target,this.callback),"undefined"!=typeof next&&this.set(!0,this.key,next,this.callback),oldValue=this.value(),this.target=next,this.value()!==oldValue&&this.callback())},e.prototype.value=function(){return"undefined"!=typeof this.target?this.get(this.key,this.target):void 0},e.prototype.setValue=function(t){"undefined"!=typeof this.target&&this.adapter(this.key).set(this.target,this.key.path,t)},e.prototype.get=function(t,e){return this.adapter(t).get(e,t.path)},e.prototype.set=function(t,e,i,n){action=t?"observe":"unobserve",this.adapter(e)[action](i,e.path,n)},e.prototype.interfaces=function(){return interfaces=Object.keys(this.options.adapters),Object.keys(t.adapters).forEach(function(t){~interfaces.indexOf(t)||interfaces.push(t)}),interfaces},e.prototype.adapter=function(e){return this.options.adapters[e.interface]||t.adapters[e.interface]},e.prototype.unobserve=function(){this.tokens.forEach(function(t,e){(obj=this.objectPath[e])&&this.set(!1,t,obj,this.update.bind(this))},this),"undefined"!=typeof this.target&&this.set(!1,this.key,this.target,this.callback)},"undefined"!=typeof module&&module.exports?module.exports=t:this.sightglass=t}.call(this),function(){var t,e,i,n,s=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1},r=function(t,e){return function(){return t.apply(e,arguments)}},o=[].slice,a={}.hasOwnProperty,l=function(t,e){function i(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t={options:["prefix","templateDelimiters","rootInterface","preloadData","handler"],extensions:["binders","formatters","components","adapters"],"public":{binders:{},components:{},formatters:{},adapters:{},prefix:"rv",templateDelimiters:["{","}"],rootInterface:".",preloadData:!0,handler:function(t,e,i){return this.call(t,e,i.view.models)},configure:function(e){var i,n,s,r;null==e&&(e={});for(s in e)if(r=e[s],"binders"===s||"components"===s||"formatters"===s||"adapters"===s)for(n in r)i=r[n],t[s][n]=i;else t["public"][s]=r},bind:function(e,i,n){var s;return null==i&&(i={}),null==n&&(n={}),s=new t.View(e,i,n),s.bind(),s}}},"jQuery"in window?(n="on"in jQuery.prototype?["on","off"]:["bind","unbind"],e=n[0],i=n[1],t.Util={bindEvent:function(t,i,n){return jQuery(t)[e](i,n)},unbindEvent:function(t,e,n){return jQuery(t)[i](e,n)},getInputValue:function(t){var e;return e=jQuery(t),"checkbox"===e.attr("type")?e.is(":checked"):e.val()}}):t.Util={bindEvent:function(){return"addEventListener"in window?function(t,e,i){return t.addEventListener(e,i,!1)}:function(t,e,i){return t.attachEvent("on"+e,i)}}(),unbindEvent:function(){return"removeEventListener"in window?function(t,e,i){return t.removeEventListener(e,i,!1)}:function(t,e,i){return t.detachEvent("on"+e,i)}}(),getInputValue:function(t){var e,i,n,s;if("checkbox"===t.type)return t.checked;if("select-multiple"===t.type){for(s=[],i=0,n=t.length;n>i;i++)e=t[i],e.selected&&s.push(e.value);return s}return t.value}},t.KeypathParser=function(){function t(){}return t.parse=function(t,e,i){var n,r,o,a,l,u;for(a=[],r={"interface":i,path:""},o=l=0,u=t.length;u>l;o=l+=1)n=t.charAt(o),s.call(e,n)>=0?(a.push(r),r={"interface":n,path:""}):r.path+=n;return a.push(r),a},t}(),t.ArgumentParser=function(){function t(){}return t.types={primitive:0,keypath:1},t.parse=function(t){var e,i,n,s;for(i=[],n=0,s=t.length;s>n;n++)e=t[n],i.push(/^'.*'$/.test(e)?{type:this.types.primitive,value:e.slice(1,-1)}:"true"===e?{type:this.types.primitive,value:!0}:"false"===e?{type:this.types.primitive,value:!1}:"null"===e?{type:this.types.primitive,value:null}:"undefined"===e?{type:this.types.primitive,value:void 0}:isNaN(Number(e))===!1?{type:this.types.primitive,value:Number(e)}:{type:this.types.keypath,value:e});return i},t}(),t.TextTemplateParser=function(){function t(){}return t.types={text:0,binding:1},t.parse=function(t,e){var i,n,s,r,o,a,l;for(a=[],r=t.length,i=0,n=0;r>n;){if(i=t.indexOf(e[0],n),0>i){a.push({type:this.types.text,value:t.slice(n)});break}if(i>0&&i>n&&a.push({type:this.types.text,value:t.slice(n,i)}),n=i+e[0].length,i=t.indexOf(e[1],n),0>i){o=t.slice(n-e[1].length),s=a[a.length-1],(null!=s?s.type:void 0)===this.types.text?s.value+=o:a.push({type:this.types.text,value:o});break}l=t.slice(n,i).trim(),a.push({type:this.types.binding,value:l}),n=i+e[1].length}return a},t}(),t.View=function(){function e(e,i,n){var s,o,a,l,u,h,d,c,p,f,b,y;for(this.els=e,this.models=i,null==n&&(n={}),this.update=r(this.update,this),this.publish=r(this.publish,this),this.sync=r(this.sync,this),this.unbind=r(this.unbind,this),this.bind=r(this.bind,this),this.select=r(this.select,this),this.build=r(this.build,this),this.componentRegExp=r(this.componentRegExp,this),this.bindingRegExp=r(this.bindingRegExp,this),this.options=r(this.options,this),this.els.jquery||this.els instanceof Array||(this.els=[this.els]),p=t.extensions,u=0,d=p.length;d>u;u++){if(o=p[u],this[o]={},n[o]){f=n[o];for(s in f)a=f[s],this[o][s]=a}b=t["public"][o];for(s in b)a=b[s],null==(l=this[o])[s]&&(l[s]=a)}for(y=t.options,h=0,c=y.length;c>h;h++)o=y[h],this[o]=n[o]||t["public"][o];this.build()}return e.prototype.options=function(){var e,i,n,s,r;for(i={},r=t.extensions.concat(t.options),n=0,s=r.length;s>n;n++)e=r[n],i[e]=this[e];return i},e.prototype.bindingRegExp=function(){return new RegExp("^"+this.prefix+"-")},e.prototype.componentRegExp=function(){return new RegExp("^"+this.prefix.toUpperCase()+"-")},e.prototype.build=function(){var e,i,n,r,o,a,l,u,h;for(this.bindings=[],a=[],e=this.bindingRegExp(),n=this.componentRegExp(),i=function(e){return function(i,n,s,r){var o,a,l,u,h,d,c;return h={},c=function(){var t,e,i,n;for(i=r.split("|"),n=[],t=0,e=i.length;e>t;t++)d=i[t],n.push(d.trim());return n}(),o=function(){var t,e,i,n;for(i=c.shift().split("<"),n=[],t=0,e=i.length;e>t;t++)a=i[t],n.push(a.trim());return n}(),u=o.shift(),h.formatters=c,(l=o.shift())&&(h.dependencies=l.split(/\s+/)),e.bindings.push(new t[i](e,n,s,u,h))}}(this),o=function(r){return function(l){var u,h,d,c,p,f,b,y,v,g,m,w,x,k,E,C,T,B,N,j,R,O,L,A,M,P,I,S,V,U;if(s.call(a,l)<0){if(3===l.nodeType){if(y=t.TextTemplateParser,(p=r.templateDelimiters)&&(w=y.parse(l.data,p)).length&&(1!==w.length||w[0].type!==y.types.text)){for(E=0,N=w.length;N>E;E++)m=w[E],g=document.createTextNode(m.value),l.parentNode.insertBefore(g,l),1===m.type&&i("TextBinding",g,null,m.value);l.parentNode.removeChild(l)}}else if(n.test(l.tagName))x=l.tagName.replace(n,"").toLowerCase(),r.bindings.push(new t.ComponentBinding(r,l,x));else if(null!=l.attributes){for(M=l.attributes,C=0,j=M.length;j>C;C++)if(u=M[C],e.test(u.name)){if(x=u.name.replace(e,""),!(d=r.binders[x])){P=r.binders;for(f in P)k=P[f],"*"!==f&&-1!==f.indexOf("*")&&(v=new RegExp("^"+f.replace("*",".+")+"$"),v.test(x)&&(d=k))}if(d||(d=r.binders["*"]),d.block){for(I=l.childNodes,T=0,R=I.length;R>T;T++)b=I[T],a.push(b);h=[u]}}for(S=h||l.attributes,B=0,O=S.length;O>B;B++)u=S[B],e.test(u.name)&&(x=u.name.replace(e,""),i("Binding",l,x,u.value))}for(V=function(){var t,e,i,n;for(i=l.childNodes,n=[],e=0,t=i.length;t>e;e++)b=i[e],n.push(b);return n}(),U=[],A=0,L=V.length;L>A;A++)c=V[A],U.push(o(c));return U}}}(this),h=this.els,l=0,u=h.length;u>l;l++)r=h[l],o(r)},e.prototype.select=function(t){var e,i,n,s,r;for(s=this.bindings,r=[],i=0,n=s.length;n>i;i++)e=s[i],t(e)&&r.push(e);return r},e.prototype.bind=function(){var t,e,i,n,s;for(n=this.bindings,s=[],e=0,i=n.length;i>e;e++)t=n[e],s.push(t.bind());return s},e.prototype.unbind=function(){var t,e,i,n,s;for(n=this.bindings,s=[],e=0,i=n.length;i>e;e++)t=n[e],s.push(t.unbind());return s},e.prototype.sync=function(){var t,e,i,n,s;for(n=this.bindings,s=[],e=0,i=n.length;i>e;e++)t=n[e],s.push(t.sync());return s},e.prototype.publish=function(){var t,e,i,n,s;for(n=this.select(function(t){return t.binder.publishes}),s=[],e=0,i=n.length;i>e;e++)t=n[e],s.push(t.publish());return s},e.prototype.update=function(t){var e,i,n,s,r,o,a;null==t&&(t={});for(i in t)n=t[i],this.models[i]=n;for(o=this.bindings,a=[],s=0,r=o.length;r>s;s++)e=o[s],a.push(e.update(t));return a},e}(),t.Binding=function(){function e(t,e,i,n,s){this.view=t,this.el=e,this.type=i,this.keypath=n,this.options=null!=s?s:{},this.update=r(this.update,this),this.unbind=r(this.unbind,this),this.bind=r(this.bind,this),this.publish=r(this.publish,this),this.sync=r(this.sync,this),this.set=r(this.set,this),this.eventHandler=r(this.eventHandler,this),this.formattedValue=r(this.formattedValue,this),this.observe=r(this.observe,this),this.setBinder=r(this.setBinder,this),this.formatters=this.options.formatters||[],this.dependencies=[],this.formatterObservers={},this.model=void 0,this.setBinder()}return e.prototype.setBinder=function(){var t,e,i,n;if(!(this.binder=this.view.binders[this.type])){n=this.view.binders;for(t in n)i=n[t],"*"!==t&&-1!==t.indexOf("*")&&(e=new RegExp("^"+t.replace("*",".+")+"$"),e.test(this.type)&&(this.binder=i,this.args=new RegExp("^"+t.replace("*","(.+)")+"$").exec(this.type),this.args.shift()))}return this.binder||(this.binder=this.view.binders["*"]),this.binder instanceof Function?this.binder={routine:this.binder}:void 0},e.prototype.observe=function(e,i,n){return t.sightglass(e,i,n,{root:this.view.rootInterface,adapters:this.view.adapters})},e.prototype.formattedValue=function(e){var i,n,s,r,a,l,u,h,d,c,p,f,b,y;for(y=this.formatters,r=c=0,f=y.length;f>c;r=++c){for(a=y[r],s=a.match(/[^\s']+|'[^']+'/g),l=s.shift(),a=this.view.formatters[l],s=t.ArgumentParser.parse(s),h=[],i=p=0,b=s.length;b>p;i=++p)n=s[i],h.push(0===n.type?n.value:((d=this.formatterObservers)[r]||(d[r]={}),(u=this.formatterObservers[r][i])?void 0:(u=this.observe(this.view.models,n.value,this.sync),this.formatterObservers[r][i]=u),u.value()));(null!=a?a.read:void 0)instanceof Function?e=a.read.apply(a,[e].concat(o.call(h))):a instanceof Function&&(e=a.apply(null,[e].concat(o.call(h))))}return e},e.prototype.eventHandler=function(t){var e,i;return i=(e=this).view.handler,function(n){return i.call(t,this,n,e)}},e.prototype.set=function(t){var e;return t=this.formattedValue(t instanceof Function&&!this.binder["function"]?t.call(this.model):t),null!=(e=this.binder.routine)?e.call(this,this.el,t):void 0},e.prototype.sync=function(){var t,e,i,n,s,r,o,a,l;if(this.model!==this.observer.target){for(o=this.dependencies,i=0,s=o.length;s>i;i++)e=o[i],e.unobserve();if(this.dependencies=[],null!=(this.model=this.observer.target)&&(null!=(a=this.options.dependencies)?a.length:void 0))for(l=this.options.dependencies,n=0,r=l.length;r>n;n++)t=l[n],e=this.observe(this.model,t,this.sync),this.dependencies.push(e)}return this.set(this.observer.value())},e.prototype.publish=function(){var e,i,n,s,r,a,l,u,h;for(s=t.Util.getInputValue(this.el),l=this.formatters.slice(0).reverse(),r=0,a=l.length;a>r;r++)i=l[r],e=i.split(/\s+/),n=e.shift(),(null!=(u=this.view.formatters[n])?u.publish:void 0)&&(s=(h=this.view.formatters[n]).publish.apply(h,[s].concat(o.call(e))));return this.observer.setValue(s)},e.prototype.bind=function(){var t,e,i,n,s,r,o;if(null!=(s=this.binder.bind)&&s.call(this,this.el),this.observer=this.observe(this.view.models,this.keypath,this.sync),this.model=this.observer.target,null!=this.model&&(null!=(r=this.options.dependencies)?r.length:void 0))for(o=this.options.dependencies,i=0,n=o.length;n>i;i++)t=o[i],e=this.observe(this.model,t,this.sync),this.dependencies.push(e);return this.view.preloadData?this.sync():void 0},e.prototype.unbind=function(){var t,e,i,n,s,r,o,a,l;for(null!=(o=this.binder.unbind)&&o.call(this,this.el),this.observer.unobserve(),a=this.dependencies,s=0,r=a.length;r>s;s++)n=a[s],n.unobserve();this.dependencies=[],l=this.formatterObservers;for(i in l){e=l[i];for(t in e)n=e[t],n.unobserve()}return this.formatterObservers={}},e.prototype.update=function(t){var e;return null==t&&(t={}),this.model=this.observer.target,this.unbind(),null!=(e=this.binder.update)&&e.call(this,t),this.bind()},e}(),t.ComponentBinding=function(e){function i(t,e,i){var n,o,a,l,u;for(this.view=t,this.el=e,this.type=i,this.unbind=r(this.unbind,this),this.bind=r(this.bind,this),this.update=r(this.update,this),this.locals=r(this.locals,this),this.component=this.view.components[this.type],this.attributes={},this.inflections={},l=this.el.attributes||[],o=0,a=l.length;a>o;o++)n=l[o],u=n.name,s.call(this.component.attributes,u)>=0?this.attributes[n.name]=n.value:this.inflections[n.name]=n.value}return l(i,e),i.prototype.sync=function(){},i.prototype.locals=function(t){var e,i,n,s,r,o,a,l,u;null==t&&(t=this.view.models),r={},l=this.inflections;for(i in l)for(e=l[i],u=e.split("."),o=0,a=u.length;a>o;o++)s=u[o],r[i]=(r[i]||t)[s];for(i in t)n=t[i],null==r[i]&&(r[i]=n);return r},i.prototype.update=function(t){var e;return null!=(e=this.componentView)?e.update(this.locals(t)):void 0},i.prototype.bind=function(){var e,i;return null!=this.componentView?null!=(i=this.componentView)?i.bind():void 0:(e=this.component.build.call(this.attributes),(this.componentView=new t.View(e,this.locals(),this.view.options)).bind(),this.el.parentNode.replaceChild(e,this.el))},i.prototype.unbind=function(){var t;return null!=(t=this.componentView)?t.unbind():void 0},i}(t.Binding),t.TextBinding=function(t){function e(t,e,i,n,s){this.view=t,this.el=e,this.type=i,this.keypath=n,this.options=null!=s?s:{},this.sync=r(this.sync,this),this.formatters=this.options.formatters||[],this.dependencies=[],this.formatterObservers={}}return l(e,t),e.prototype.binder={routine:function(t,e){return t.data=null!=e?e:""}},e.prototype.sync=function(){return e.__super__.sync.apply(this,arguments)},e}(t.Binding),t["public"].binders.text=function(t,e){return null!=t.textContent?t.textContent=null!=e?e:"":t.innerText=null!=e?e:""},t["public"].binders.html=function(t,e){return t.innerHTML=null!=e?e:""},t["public"].binders.show=function(t,e){return t.style.display=e?"":"none"},t["public"].binders.hide=function(t,e){return t.style.display=e?"none":""},t["public"].binders.enabled=function(t,e){return t.disabled=!e},t["public"].binders.disabled=function(t,e){return t.disabled=!!e},t["public"].binders.checked={publishes:!0,bind:function(e){return t.Util.bindEvent(e,"change",this.publish)},unbind:function(e){return t.Util.unbindEvent(e,"change",this.publish)},routine:function(t,e){var i;return t.checked="radio"===t.type?(null!=(i=t.value)?i.toString():void 0)===(null!=e?e.toString():void 0):!!e}},t["public"].binders.unchecked={publishes:!0,bind:function(e){return t.Util.bindEvent(e,"change",this.publish)},unbind:function(e){return t.Util.unbindEvent(e,"change",this.publish)},routine:function(t,e){var i;return t.checked="radio"===t.type?(null!=(i=t.value)?i.toString():void 0)!==(null!=e?e.toString():void 0):!e}},t["public"].binders.value={publishes:!0,bind:function(e){return this.event="SELECT"===e.tagName?"change":"input",t.Util.bindEvent(e,this.event,this.publish)},unbind:function(e){return t.Util.unbindEvent(e,this.event,this.publish)},routine:function(t,e){var i,n,r,o,a,l,u;if(null!=window.jQuery){if(t=jQuery(t),(null!=e?e.toString():void 0)!==(null!=(o=t.val())?o.toString():void 0))return t.val(null!=e?e:"")}else if("select-multiple"===t.type){if(null!=e){for(u=[],n=0,r=t.length;r>n;n++)i=t[n],u.push(i.selected=(a=i.value,s.call(e,a)>=0));return u}}else if((null!=e?e.toString():void 0)!==(null!=(l=t.value)?l.toString():void 0))return t.value=null!=e?e:""}},t["public"].binders["if"]={block:!0,bind:function(t){var e,i;return null==this.marker?(e=[this.view.prefix,this.type].join("-").replace("--","-"),i=t.getAttribute(e),this.marker=document.createComment(" rivets: "+this.type+" "+i+" "),this.bound=!1,t.removeAttribute(e),t.parentNode.insertBefore(this.marker,t),t.parentNode.removeChild(t)):void 0},unbind:function(){var t;return null!=(t=this.nested)?t.unbind():void 0},routine:function(e,i){var n,s,r,o;if(!!i==!this.bound){if(i){r={},o=this.view.models;for(n in o)s=o[n],r[n]=s;return(this.nested||(this.nested=new t.View(e,r,this.view.options()))).bind(),this.marker.parentNode.insertBefore(e,this.marker.nextSibling),this.bound=!0}return e.parentNode.removeChild(e),this.nested.unbind(),this.bound=!1}},update:function(t){var e;return null!=(e=this.nested)?e.update(t):void 0}},t["public"].binders.unless={block:!0,bind:function(e){return t["public"].binders["if"].bind.call(this,e)},unbind:function(){return t["public"].binders["if"].unbind.call(this)},routine:function(e,i){return t["public"].binders["if"].routine.call(this,e,!i)},update:function(e){return t["public"].binders["if"].update.call(this,e)}},t["public"].binders["on-*"]={"function":!0,unbind:function(e){return this.handler?t.Util.unbindEvent(e,this.args[0],this.handler):void 0},routine:function(e,i){return this.handler&&t.Util.unbindEvent(e,this.args[0],this.handler),t.Util.bindEvent(e,this.args[0],this.handler=this.eventHandler(i))}},t["public"].binders["each-*"]={block:!0,bind:function(t){var e,i,n,s,r;if(null==this.marker)e=[this.view.prefix,this.type].join("-").replace("--","-"),this.marker=document.createComment(" rivets: "+this.type+" "),this.iterated=[],t.removeAttribute(e),t.parentNode.insertBefore(this.marker,t),t.parentNode.removeChild(t);else for(r=this.iterated,n=0,s=r.length;s>n;n++)i=r[n],i.bind()},unbind:function(){var t,e,i,n,s;if(null!=this.iterated){for(n=this.iterated,s=[],e=0,i=n.length;i>e;e++)t=n[e],s.push(t.unbind());return s}},routine:function(e,i){var n,s,r,o,a,l,u,h,d,c,p,f,b,y,v,g,m,w,x,k,E;if(u=this.args[0],i=i||[],this.iterated.length>i.length)for(w=Array(this.iterated.length-i.length),f=0,v=w.length;v>f;f++)r=w[f],p=this.iterated.pop(),p.unbind(),this.marker.parentNode.removeChild(p.els[0]);for(o=b=0,g=i.length;g>b;o=++b)if(l=i[o],s={index:o},s[u]=l,null==this.iterated[o]){x=this.view.models;for(a in x)l=x[a],null==s[a]&&(s[a]=l);d=this.iterated.length?this.iterated[this.iterated.length-1].els[0]:this.marker,h=this.view.options(),h.preloadData=!0,c=e.cloneNode(!0),p=new t.View(c,s,h),p.bind(),this.iterated.push(p),this.marker.parentNode.insertBefore(c,d.nextSibling)}else this.iterated[o].models[u]!==l&&this.iterated[o].update(s);if("OPTION"===e.nodeName){for(k=this.view.bindings,E=[],y=0,m=k.length;m>y;y++)n=k[y],E.push(n.el===this.marker.parentNode&&"value"===n.type?n.sync():void 0);return E}},update:function(t){var e,i,n,s,r,o,a,l;e={};for(i in t)n=t[i],i!==this.args[0]&&(e[i]=n);for(a=this.iterated,l=[],r=0,o=a.length;o>r;r++)s=a[r],l.push(s.update(e));return l}},t["public"].binders["class-*"]=function(t,e){var i;return i=" "+t.className+" ",!e==(-1!==i.indexOf(" "+this.args[0]+" "))?t.className=e?""+t.className+" "+this.args[0]:i.replace(" "+this.args[0]+" "," ").trim():void 0},t["public"].binders["*"]=function(t,e){return null!=e?t.setAttribute(this.type,e):t.removeAttribute(this.type)},t["public"].adapters["."]={id:"_rv",counter:0,weakmap:{},weakReference:function(t){var e;return t.hasOwnProperty(this.id)||(e=this.counter++,this.weakmap[e]={callbacks:{}},Object.defineProperty(t,this.id,{value:e})),this.weakmap[t[this.id]]},stubFunction:function(t,e){var i,n,s;return n=t[e],i=this.weakReference(t),s=this.weakmap,t[e]=function(){var e,r,o,a,l,u,h,d,c,p;a=n.apply(t,arguments),h=i.pointers;for(o in h)for(r=h[o],p=null!=(d=null!=(c=s[o])?c.callbacks[r]:void 0)?d:[],l=0,u=p.length;u>l;l++)(e=p[l])();return a}},observeMutations:function(t,e,i){var n,r,o,a,l,u;if(Array.isArray(t)){if(o=this.weakReference(t),null==o.pointers)for(o.pointers={},r=["push","pop","shift","unshift","sort","reverse","splice"],l=0,u=r.length;u>l;l++)n=r[l],this.stubFunction(t,n);if(null==(a=o.pointers)[e]&&(a[e]=[]),s.call(o.pointers[e],i)<0)return o.pointers[e].push(i)}},unobserveMutations:function(t,e,i){var n,s,r;return Array.isArray(t&&null!=t[this.id])&&(s=null!=(r=this.weakReference(t).pointers)?r[e]:void 0)&&(n=s.indexOf(i),n>=0)?s.splice(n,1):void 0},observe:function(t,e,i){var n,r;return n=this.weakReference(t).callbacks,null==n[e]&&(n[e]=[],r=t[e],Object.defineProperty(t,e,{enumerable:!0,get:function(){return r},set:function(o){return function(a){var l,u,h;if(a!==r){for(r=a,h=n[e].slice(),l=0,u=h.length;u>l;l++)i=h[l],s.call(n[e],i)>=0&&i();return o.observeMutations(a,t[o.id],e)}}}(this)})),s.call(n[e],i)<0&&n[e].push(i),this.observeMutations(t[e],t[this.id],e)},unobserve:function(t,e,i){var n,s;return n=this.weakmap[t[this.id]].callbacks[e],s=n.indexOf(i),s>=0&&n.splice(s,1),this.unobserveMutations(t[e],t[this.id],e)},get:function(t,e){return t[e]},set:function(t,e,i){return t[e]=i}},t.factory=function(e){return t.sightglass=e,t["public"]._=t,t["public"]},"object"==typeof("undefined"!=typeof module&&null!==module?module.exports:void 0)?module.exports=t.factory(require("sightglass")):"function"==typeof define&&define.amd?define(["sightglass"],function(e){return this.rivets=t.factory(e)}):this.rivets=t.factory(sightglass)}.call(this);var octosearch=octosearch||{};octosearch.view=function(t){return{user:t.getElementById("user"),repos:t.getElementById("repos"),reposTemplate:repos.innerHTML,languages:t.getElementById("languages"),message:{title:t.getElementById("message-title"),content:t.getElementById("message-content")}}}(document),octosearch.model=function(t){var e="https://api.github.com/",i=function(i,n){t.jabiru.get(e+"users/"+i,function(t){n(t)})},n=function(i,n){t.jabiru.get(e+"users/"+i+"/repos",function(t){n(t)})};return{getUser:i,getRepositories:n}}(window,document),octosearch.controller=function(t,e){var i=e.getElementById("search-input"),n=e.getElementById("search-submit"),s=document.getElementById("main"),r=document.getElementById("message"),o=document.querySelector(".user-avatar"),a=function(){r.removeClass("show-message"),octosearch.view.message.title.innerHTML="",octosearch.view.message.content.innerHTML=""},l=function(){r.addClass("show-message")},u=function(t,e,i){octosearch.view.message.title.innerHTML=e,octosearch.view.message.content.innerHTML=i,r.className="",t&&r.addClass(t),l()},h=function(){s.removeClass("loaded"),o.removeClass("loaded"),octosearch.view.languages.innerHTML="",octosearch.view.languages.style.display="none",e.getElementById("no-repositories-message").style.display="none",e.querySelector(".repos-list").style.display="block"},d=function(){s.addClass("loaded")},c=function(){return""!==i.value},p=function(){if(h(),u("loading","LOADING...","We'll be ready in a second!"),c()){var t=decodeURI(i.value);octosearch.model.getUser(t,f)}},f=function(e){if(200===e.meta.status){rivets.bind(octosearch.view.user,{user:e.data});var i=e.data.login;octosearch.model.getRepositories(i,b),"history"in t&&t.history.pushState(i,"OctoSearch // "+i,"?"+i)}else 404===e.meta.status?u("error","User Not Found","There is no GitHub user with this name, please try with a different one."):u("error","Something went wrong :(","Please try again later.")},b=function(t){if(200===t.meta.status){if(0===t.data.length)e.querySelector(".repos-list").style.display="none",e.getElementById("no-repositories-message").style.display="block";else{octosearch.view.repos.innerHTML=octosearch.view.reposTemplate,rivets.bind(octosearch.view.repos,{repos:t.data});for(var i=octosearch.view.repos.querySelectorAll(".more-info-button"),n=0,s=i.length;s>n;n++)i[n].onclick=v.bind(i[n]);g(t.data)}a(),d()}else u("error","Connection Error","Please try again.")},y=function(){var t=document.location.search.replace("?","");t&&(u("loading","LOADING...","We'll be ready in a second!"),octosearch.model.getUser(t,f))},v=function(){this.toggleClass("expanded")},g=function(t){for(var i,n={},s=[],r=[],o=0,a=e.createElement("ul"),l=["#e51c23"," #9c27b0","#ffc107","#5677fc","#ff5722","#55cF90","#e91e63","#aa00ff","#5677fc","#607d8b","#e05bdF"],u=0,h=t.length;h>u;u++){var d=t[u].language;n[d]?++n[d+""]:n[d+""]=1,++o}for(var c in n)"null"===c?(s.push("Not specified"),r.push(n[c]/o*100)):(s.push(c),r.push(n[c]/o*100));a.addClass("lang-info");for(var p=0,f=s.length;f>p;p++){var b=e.createElement("li"),y=e.createElement("span");y.innerHTML=r[p].toFixed(2)+"%",b.style.color=l[p],b.innerHTML=s[p],b.appendChild(y),a.appendChild(b)}i=createPie("lang-pie-chart","200px","#ffffff",s.length,r,l),octosearch.view.languages.appendChild(i),octosearch.view.languages.appendChild(a),octosearch.view.languages.style.display="block"},m=function(){n.onclick=function(t){t.preventDefault(),p()},window.onload=function(){e.body.addClass("loaded"),o.onload=function(){o.addClass("loaded")},l(),y()}};return{init:m}}(window,document),octosearch.controller.init();